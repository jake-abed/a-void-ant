[gd_scene load_steps=24 format=3 uid="uid://mvts1u0fvq20"]

[ext_resource type="PackedScene" uid="uid://vi5jbjg63k3f" path="res://tile_map.tscn" id="1_cr2re"]
[ext_resource type="PackedScene" uid="uid://cea8ghp5b1o0r" path="res://scenes/sky.tscn" id="2_ijpaf"]
[ext_resource type="Script" path="res://assets/scripts/portal.gd" id="4_3c522"]
[ext_resource type="Script" path="res://assets/scripts/moving_platform.gd" id="5_6ha7v"]
[ext_resource type="Texture2D" uid="uid://ddmf118wuplto" path="res://assets/sprites/platform.png" id="6_qeak8"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nve8i"]
size = Vector2(93.5, 119)

[sub_resource type="Curve2D" id="Curve2D_jfv56"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, 0, 0, 0, 0, 0, -200)
}
point_count = 3

[sub_resource type="Animation" id="Animation_nfa0f"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_miq1t"]
resource_name = "move"
length = 4.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.6, 3.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_5i0ed"]
_data = {
"RESET": SubResource("Animation_nfa0f"),
"move": SubResource("Animation_miq1t")
}

[sub_resource type="Curve2D" id="Curve2D_ao5ab"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 40.6787, 0.268463, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 200, 0)
}
point_count = 4

[sub_resource type="Animation" id="Animation_mqfw5"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_t3y86"]
resource_name = "move"
length = 4.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.6, 3.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_x2ovd"]
_data = {
"RESET": SubResource("Animation_mqfw5"),
"move": SubResource("Animation_t3y86")
}

[sub_resource type="Curve2D" id="Curve2D_p7ql3"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -100, 0, 0, 0, 0, 0, -200)
}
point_count = 3

[sub_resource type="Animation" id="Animation_kyl7c"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_n0v4l"]
resource_name = "move"
length = 4.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.6, 3.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j4jer"]
_data = {
"RESET": SubResource("Animation_kyl7c"),
"move": SubResource("Animation_n0v4l")
}

[sub_resource type="Curve2D" id="Curve2D_4dqeh"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 200, 0)
}
point_count = 3

[sub_resource type="Animation" id="Animation_8crlf"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_lolmi"]
resource_name = "move"
length = 4.0
loop_mode = 2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PathFollow2D:progress_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.6, 3.4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [1.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1wgoj"]
_data = {
"RESET": SubResource("Animation_8crlf"),
"move": SubResource("Animation_lolmi")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_se7j7"]
size = Vector2(64, 75.5)

[node name="Hills" type="Node2D"]
position = Vector2(616, 264)

[node name="TileMap" parent="." instance=ExtResource("1_cr2re")]

[node name="Sky" parent="." instance=ExtResource("2_ijpaf")]

[node name="HillsWest" type="Area2D" parent="." node_paths=PackedStringArray("collision_shape", "spawn")]
position = Vector2(-822, 10)
scale = Vector2(1, 1.28)
script = ExtResource("4_3c522")
target_room = "Void"
target_location = "VoidEast"
collision_shape = NodePath("CollisionShape2D")
spawn = NodePath("Spawn")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HillsWest"]
position = Vector2(41, -61.7188)
shape = SubResource("RectangleShape2D_nve8i")

[node name="Spawn" type="Marker2D" parent="HillsWest"]
position = Vector2(147, -13.2813)

[node name="MovingPlatforms" type="Node" parent="."]

[node name="MovingPlatform" type="Path2D" parent="MovingPlatforms" node_paths=PackedStringArray("anim_player")]
position = Vector2(5505, -488)
curve = SubResource("Curve2D_jfv56")
script = ExtResource("5_6ha7v")
anim_player = NodePath("AnimationPlayer")

[node name="PathFollow2D" type="PathFollow2D" parent="MovingPlatforms/MovingPlatform"]
rotation = -1.5708
rotates = false

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="MovingPlatforms/MovingPlatform/PathFollow2D"]
remote_path = NodePath("../../AnimatableBody2D")
update_rotation = false

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="MovingPlatforms/MovingPlatform"]

[node name="Sprite2D" type="Sprite2D" parent="MovingPlatforms/MovingPlatform/AnimatableBody2D"]
texture = ExtResource("6_qeak8")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MovingPlatforms/MovingPlatform/AnimatableBody2D"]
polygon = PackedVector2Array(-60, -8, 59, -8, 62, -7, 64, -3, 64, 3, 60, 8, -60, 8, -64, 4, -64, -3, -62, -7)

[node name="AnimationPlayer" type="AnimationPlayer" parent="MovingPlatforms/MovingPlatform"]
libraries = {
"": SubResource("AnimationLibrary_5i0ed")
}

[node name="MovingPlatform2" type="Path2D" parent="MovingPlatforms" node_paths=PackedStringArray("anim_player")]
position = Vector2(5060, -424)
curve = SubResource("Curve2D_ao5ab")
script = ExtResource("5_6ha7v")
anim_player = NodePath("AnimationPlayer")

[node name="PathFollow2D" type="PathFollow2D" parent="MovingPlatforms/MovingPlatform2"]
rotation = -1.5708
rotates = false

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="MovingPlatforms/MovingPlatform2/PathFollow2D"]
remote_path = NodePath("../../AnimatableBody2D")
update_rotation = false

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="MovingPlatforms/MovingPlatform2"]

[node name="Sprite2D" type="Sprite2D" parent="MovingPlatforms/MovingPlatform2/AnimatableBody2D"]
texture = ExtResource("6_qeak8")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MovingPlatforms/MovingPlatform2/AnimatableBody2D"]
polygon = PackedVector2Array(-60, -8, 59, -8, 62, -7, 64, -3, 64, 3, 60, 8, -60, 8, -64, 4, -64, -3, -62, -7)

[node name="AnimationPlayer" type="AnimationPlayer" parent="MovingPlatforms/MovingPlatform2"]
libraries = {
"": SubResource("AnimationLibrary_x2ovd")
}

[node name="MovingPlatform3" type="Path2D" parent="MovingPlatforms" node_paths=PackedStringArray("anim_player")]
position = Vector2(5217, -744)
curve = SubResource("Curve2D_p7ql3")
script = ExtResource("5_6ha7v")
anim_player = NodePath("AnimationPlayer")

[node name="PathFollow2D" type="PathFollow2D" parent="MovingPlatforms/MovingPlatform3"]
rotation = -1.5708
rotates = false

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="MovingPlatforms/MovingPlatform3/PathFollow2D"]
remote_path = NodePath("../../AnimatableBody2D")
update_rotation = false

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="MovingPlatforms/MovingPlatform3"]

[node name="Sprite2D" type="Sprite2D" parent="MovingPlatforms/MovingPlatform3/AnimatableBody2D"]
texture = ExtResource("6_qeak8")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MovingPlatforms/MovingPlatform3/AnimatableBody2D"]
polygon = PackedVector2Array(-60, -8, 59, -8, 62, -7, 64, -3, 64, 3, 60, 8, -60, 8, -64, 4, -64, -3, -62, -7)

[node name="AnimationPlayer" type="AnimationPlayer" parent="MovingPlatforms/MovingPlatform3"]
libraries = {
"": SubResource("AnimationLibrary_j4jer")
}

[node name="MovingPlatform4" type="Path2D" parent="MovingPlatforms" node_paths=PackedStringArray("anim_player")]
position = Vector2(5473, -1000)
curve = SubResource("Curve2D_4dqeh")
script = ExtResource("5_6ha7v")
anim_player = NodePath("AnimationPlayer")

[node name="PathFollow2D" type="PathFollow2D" parent="MovingPlatforms/MovingPlatform4"]
rotation = -1.5708
rotates = false

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="MovingPlatforms/MovingPlatform4/PathFollow2D"]
remote_path = NodePath("../../AnimatableBody2D")
update_rotation = false

[node name="AnimatableBody2D" type="AnimatableBody2D" parent="MovingPlatforms/MovingPlatform4"]

[node name="Sprite2D" type="Sprite2D" parent="MovingPlatforms/MovingPlatform4/AnimatableBody2D"]
texture = ExtResource("6_qeak8")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="MovingPlatforms/MovingPlatform4/AnimatableBody2D"]
polygon = PackedVector2Array(-60, -8, 59, -8, 62, -7, 64, -3, 64, 3, 60, 8, -60, 8, -64, 4, -64, -3, -62, -7)

[node name="AnimationPlayer" type="AnimationPlayer" parent="MovingPlatforms/MovingPlatform4"]
libraries = {
"": SubResource("AnimationLibrary_1wgoj")
}

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0, 0, 0, 1)

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="."]
position = Vector2(4312, -1016)

[node name="HillsDown" type="Area2D" parent="." node_paths=PackedStringArray("collision_shape", "spawn")]
position = Vector2(5160, 200)
script = ExtResource("4_3c522")
target_room = "Cave"
target_location = "CaveTopEast"
collision_shape = NodePath("CollisionShape2D")
spawn = NodePath("Spawn")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HillsDown"]
position = Vector2(-8, 80)
shape = SubResource("RectangleShape2D_se7j7")

[node name="Spawn" type="Marker2D" parent="HillsDown"]
position = Vector2(-48, -48)
